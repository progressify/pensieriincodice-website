---
authors: [Valerio Galano]
title: "Le lettere di Mary Stuart e l\'algoritmo di Hill climbing"
layout: episode
episode_type: full
series: []
categories: [podcast]
tags: [crittografia,decrittazione,divulgazione,marystuart,ottimizzazione]
seasons: 2
number: 120
date: Sun, 01 Oct 2023 18:00:02 +0000
audio: "episodes/PIC120.mp3"
audio_duration: 2723
audio_size: 43561508
transcript: transcripts/srt/PIC120.srt
url: /episodes/120
aliases: 
  - /120
image: "images/covers/PIC120.png"
explicit: "no"
draft: false
type: podcast
---
Oggi parliamo di un'applicazione reale di un algoritmo di ricerca dell'ottimo con il quale alcuni ricercatori hanno decifrato le lettere cifrate scritte da Maria Stuart, Regina di Scozia.<br /><a href="https://pensieriincodice.it/" target="_blank" rel="noreferrer noopener">Pensieri in codice</a><br />Sostenitori di oggi:<br />Edoardo Secco, Carlo Tomas, PaolaZ<br /><a href="https://www.satispay.com/download/qrcode/S6Y-CON--EC548199-5F32-4BD6-AAF5-73A999744E56" target="_blank" rel="noreferrer noopener">Sostieni tramite Satispay</a><br /><a href="https://revolut.me/valeriogalano" target="_blank" rel="noreferrer noopener">Sostieni tramite Revolut</a><br /><a href="https://www.paypal.com/donate/?hosted_button_id=HRKMD7X43R7SS" target="_blank" rel="noreferrer noopener">Sostieni tramite PayPal</a><br />Sostieni utilizzando i link affiliati di Pensieri in codice:<br /><a href="https://amzn.to/3CPOWgC" target="_blank" rel="noreferrer noopener">Amazon</a> <a href="https://doist.grsm.io/valeriogalano5066" target="_blank" rel="noreferrer noopener">Todoist</a> <a href="https://go.getproton.me/SHMB" target="_blank" rel="noreferrer noopener">ProtonMail</a> <a href="https://go.getproton.me/SHN0" target="_blank" rel="noreferrer noopener">ProtonVPN</a> <a href="https://bit.ly/3fQUVaU" target="_blank" rel="noreferrer noopener">Satispay</a><br />Attrezzatura utilizzata:<br /><a href="https://amzn.to/3862ZRf" target="_blank" rel="noreferrer noopener">Shure Microfono Podcast USB MV7</a><br /><a href="https://amzn.to/3rysTFP" target="_blank" rel="noreferrer noopener">Neewer NW-5 Pannello fonoassorbente</a><br />Crediti:<br />Sound design - <a href="https://ulti.media/" target="_blank" rel="noreferrer noopener">Alex Raccuglia</a><br />Voce intro - <a href="https://linktr.ee/dannatiarchitettipodcast/" target="_blank" rel="noreferrer noopener">Maria Chiara Virgili</a><br />Voce intro - <a href="https://mercuriopodcast.com/" target="_blank" rel="noreferrer noopener">Spad</a><br />Musiche - Kubbi - Up In My Jam, Light-foot - Moldy Lotion, Creativity, Old time memories<br />Suoni - Zapsplat.com<br />Cover e trascrizione - <a href="https://it.linkedin.com/in/francesco-zubani-5957081a6" rel="noopener">Francesco Zubani</a><br />Codice sconto agli eventi del GrUSP: <i><b>community_PIC</b></i><br /><a href="https://www.grusp.org/" target="_blank" rel="noreferrer noopener">https://www.grusp.org/</a><br />Fonti:<br /><a href="https://www.tandfonline.com/doi/full/10.1080/01611194.2022.2160677" target="_blank" rel="noreferrer noopener">https://www.tandfonline.com/doi/full/10.1080/01611194.2022.2160677</a><br /><a href="https://www.geeksforgeeks.org/introduction-hill-climbing-artificial-intelligence/" target="_blank" rel="noreferrer noopener">https://www.geeksforgeeks.org/introduction-hill-climbing-artificial-intelligence/</a><br />Mark Frary - De/cifrare. Come funzionano i più grandi codici della storia, dal cifrario di Cesare alla password del wi-fi <a href="https://amzn.to/46gAyvA" target="_blank" rel="noreferrer noopener">https://amzn.to/46gAyvA</a><br /><a href="https://www.cryptomuseum.com/people/friedman/files/TIOC_Aegean_1987.pdf" target="_blank" rel="noreferrer noopener">https://www.cryptomuseum.com/people/friedman/files/TIOC_Aegean_1987.pdf</a>

<!-- more -->

## Testo dell'episodio

La criptografia e l'informatica sono due attività umane che prese insieme hanno sempre
esercitato un certo fascino su di me, esse procedono a braccetto, si completano a vicenda,
si migliorano a vicenda e oggi come oggi sono indispensabili l'una all'altra.
In questo episodio quindi ho pensato di parlarti di una moderna storia di criptoanalisi e poi
di approfondirne insieme gli aspetti informatici.
Insomma, un po' di storia e un po' di riflessioni come al solito in stile Pensieri in Codice, sigla!
Benvenuti su Pensieri in Codice, il podcast dove si ragiona da informatici, con Valerio Galano.
Oh, finalmente riesco a registrare un nuovo episodio, ormai il tempo è davvero poco,
purtroppo quest'anno è andata così, spero però nel mese di novembre che dovrebbe essere il mio
mese di ferie, si sentono le virgolette? Ma ad ogni modo ho quasi pronta una miniserie che mi piace
tantissimo, almeno mi è piaciuto scriverla, organizzare le collaborazioni eccetera, spero
piacerà anche a te. Sarà composta da tre episodi che dovrebbero uscire settimanalmente che saranno
uno più interessante dell'altro e lo so che te la prometto praticamente da febbraio ma ormai ci
siamo, promesso, di nuovo. Ma ora veniamo a noi e all'argomento di oggi. Di informatica e di
crittografia abbiamo già parlato in passato qui su Pensieri in Codice, si tratta di due scienze
da sempre molto legate, due aspetti dell'ingegno umano che si muovono di pari passo e che si
alimentano l'un l'altro. Da un punto di vista meramente storico la crittografia è un po' più
antica dell'informatica, probabilmente fin da quando ha iniziato a comunicare l'essere umano
ha sentito il bisogno di condividere informazioni con qualcuno e contemporaneamente nasconderle a
qualcun altro. Le prime testimonianze di questo atteggiamento e di prime rudimentali tecniche
risalgono infatti a già più di 5.000 anni fa e se ti piace l'idea di saperne un po' di più su
questo argomento ti consiglio di dare un'occhiata al libro Decifrare di cui ti lascio in descrizione
il link e che offre una bella carrellata di vari metodi utilizzati nel corso della storia. È un
libro che ho già consigliato qui su questo podcast ma mi è piaciuto molto soprattutto per la sua
scorrevolezza e quindi te lo consiglio di nuovo. Ovviamente essendo una sorta di catalogo è
piuttosto generico e non approfondisce gli argomenti però fornisce una bella serie di
spunti da cui iniziare. D'altronde è anche un po' il senso di pensieri in codice no? Parlarti
di qualcosa e fare in modo che tu ti appassioni ad un certo argomento per poi andare ad approfondirlo
in autonomia. Ma tornando al nostro argomento l'informatica è invece una scienza relativamente
più recente soprattutto per come la intendiamo noi e cioè come la gestione meccanizzata
dell'informatica. Possiamo infatti trovare testimonianze a partire dal X secolo avanti
cristo quindi anche qualche millennio dopo la crittografia. Ma parlando pragmaticamente diciamocelo
ciò che a noi amanti della tecnologia interessa realmente è tutto più o meno concentrato nell'ultimo
secolo. La nascita e lo sviluppo dei computer infatti ha costituito quella spinta enorme al
miglioramento dei metodi crittografici e ha anche reso queste pratiche più semplici e a poco a poco
alla portata sempre di più persone. Allo stesso tempo poi la medesima spinta innovativa ha anche
aumentato le possibilità di mettere in pratica metodologie per la crittoanalisi cioè quelle utili
per la rottura dei codici il che ha innescato a sua volta la necessità di nuovi sistemi
crittografici più complessi e sicuri il che ha portato a nuovi metodi di rottura e così via.
Tutto ciò si è quindi concretizzato in un susseguirsi di invenzioni, di avanzamenti
tecnologici, una corsa del gatto col topo, una sorta di spirale esponenziale crittografia più
avanzata, code breaking più potente, tecnologia ancora più avanzata, crittoanalisi ancora più
spinta e così via. Oggi dunque quello che mi interessa e di cui ti voglio parlare è appunto
un episodio di crittoanalisi l'applicazione di una tecnica per rompere una cifratura di cui le
chiavi originali erano ormai andate perdute nel tempo un qualcosa che ha permesso a dei
ricercatori di recuperare proprio un piccolo pezzo di storia creduto perduto.
Oggi la crittografia è veramente alla portata di tutti e perfino nei nostri computer, gli smartphone,
protegge i nostri messaggi, gli acquisti e tanto altro senza che noi neanche dobbiamo fare nulla
per metterla in funzione, ma non è sempre stato così. Per secoli è stato difficile ricorrere ad un
tale metodo di protezione delle informazioni, bisognava conoscere le tecniche, avere tempo e
capacità di metterle in atto, corrispondere con chi fosse in grado di fare altrettanto e di
invertire il processo per decifrare i testi. Per questi motivi erano soprattutto personaggi di
spicco a poterne fare uso, politici, nobili, regnanti e figure importanti in generale potevano
scegliere di impiegare risorse per applicare la crittografia a documenti o lettere per impedire
che le informazioni in esse contenute finissero nelle mani di nemici o concorrenti. A volte
nascondere il contenuto di un testo poteva servire per proteggere segreti di stato, altre volte per
coprire le proprie tracce, altre ancora per difendere i propri interessi economici. La
crittografia poteva salvare vite come insabbiare misfatti, ma quali che fossero gli scopi sta di
fatto che l'applicazione di questa pratica nel tempo ha prodotto una notevole quantità di materiale
che è pervenuto a noi a volte ancora in forma non leggibile e pertanto non correttamente catalogato
o attribuito ai giusti autori. In pratica ancora oggi abbiamo conservati in biblioteche e archivi
tanti documenti non decifrati che non possono e non vengono studiati e che potrebbero essere di
grande interesse storico o potrebbero andare a completare parti mancanti all'interno di importanti
collezioni. L'unico modo per assegnare loro il giusto posto nella storia è decifrarli, ma data
la loro natura segreta spesso le chiavi di cifratura venivano tenute ben nascoste e di
conseguenza sono andate perdute nel tempo o intenzionalmente distrutte ed è qui che ci
vengono in aiuto i computer e gli algoritmi moderni. Essi permettono infatti ai ricercatori
che ne fanno uso di decifrare in tempi ragionevoli codici che fino a pochi anni fa avrebbero richiesto
anni di lavoro. I metodi di crittografia sono infatti pensati per rendere la decrittazione
impossibile o almeno molto molto complicata e pensare di affrontare un lavoro del genere senza
l'aiuto di un moderno calcolatore implicherebbe armarsi di notevole pazienza e dover effettuare
migliaia di tentativi a mano. Oggi invece un computer che esegue un buon algoritmo è in grado
di sopperire a buona parte di questo lavoro o almeno di tutta quella parte più noiosa e
ripetitiva e la storia che ti sto per raccontare parla proprio di come tre ricercatori hanno
ritrovato e decifrato a colpi di algoritmi e ragionamenti ben 55 lettere scritte dalla famosa
regina di Scozia Mary Stewart. Queste lettere credute perdute fanno ora parte per la quasi
totalità della corrispondenza tra Maria Stewart e Michel de Castelnau, ambasciatore di Francia e
furono inviate negli anni che vanno dal 1578 al 1584. Potrebbe non sembrare ma si tratta di un
ritrovamento che ha un'importanza storica notevole. Esso infatti innanzitutto getta nuova luce su un
preciso periodo della vita di Mary Stewart e poi come vedremo a breve ci dà molte informazioni
riguardo il metodo criptografico utilizzato all'epoca, sulle scelte per incrementare la
sicurezza e persino sulla strana tipologia di errori commessi dai responsabili della codifica.
Senza contare il fatto che poi si è scoperto che negli archivi britannici erano presenti già copie
in chiaro di sette delle 55 lettere e ciò rappresenta la prova che esse furono in qualche
modo intercettate e decifrate già al tempo, probabilmente ad opera di una talpa. E se ora
ti stai chiedendo perché non ci si sia dedicati prima alla decrittazione di queste lettere così
importanti, beh la risposta è semplice, esse non contenevano alcuna parte scritta in chiaro e
pertanto, come ti dicevo poco fa, erano impossibili da riconoscere come appartenenti a Mary Stewart ed
erano finite nel posto sbagliato in mezzo a tanti altri documenti che non c'entravano nulla.
Mary Stewart nacque nel 1542 e salì al trono di Scozia quando aveva solo sei giorni di vita a
seguito della prematura morte del padre Giacomo V. Inviata in Francia all'età di sei anni per
essere educata alla corte francese, a 16 sposò l'uomo che l'anno successivo divenne re di Francia
e che poi morì l'anno successivo ancora. Nel 1561 poi a 19 anni Maria tornò in Scozia e dopo altri
quattro anni sposò Enrico Stewart dando alla luce un figlio che sarebbe in futuro divenuto Giacomo
VI. Tuttavia anche questo secondo marito non ebbe vita lunga e poco dopo la sua morte Maria
si sposò nuovamente, questa volta con il conte di Bothwell. Questo terzo matrimonio però fu
giudicato troppo prematuro dagli ambienti dell'alta società anche perché il conte era sospettato di
essere coinvolto nell'omicidio del precedente marito di lei e quindi Maria si inimicò gran
parte della nobiltà protestante dell'epoca la quale la fece imprigionare a Loch Leven, un castello
su di un'isola al centro di un lago dove lei fu costretta ad abdicare in favore del figlio neonato
nel 1567. L'anno successivo riuscì anche a fuggire e rifugiarsi in Inghilterra cercando protezione da
parte della regina Elisabetta ma quest'ultima considerandola una minaccia preferì lasciare
Giacomo come re di Scozia i cui reggenti erano a favore dei regnanti inglesi e imprigionare di
nuovo Maria. La Stuart trascorse così il resto della sua vita in Inghilterra sotto la custodia
del conte di Shrewsbury vivendo nei vari castelli e tenute di proprietà di quest'ultimo. Nonostante
la prigionia però Maria riuscì a mantenere una discreta corrispondenza con i suoi contatti in
Inghilterra e in Francia come appunto l'ambasciatore francese a Londra Castelnau, l'altro protagonista
di questa storia o anche l'arcivescovo di Glasgow James Beaton. Fu proprio a causa di questa sua
condizione di prigioniera politica e la necessità di comunicare con i suoi collaboratori che Maria
dovette ricorrere all'impiego appunto della criptografia. Una serie di canali di comunicazione
segreti mantenuti attivi grazie ad un manipolo di persone fidate infatti le permettevano di
spedire e ricevere lettere il cui contenuto andava ben oltre i normali affari di una nobile donna e
amministratrice di proprietà. Non era però raro che alcune di queste missive venissero intercettate
o non recapitate a causa di vari problemi impedimenti o persino trappole e pertanto per
evitare che occhi indiscreti ne leggessero il contenuto molte delle lettere scritte da Maria
in quel periodo venivano criptate e le 55 di cui parliamo oggi ne sono proprio un esempio.
Come già accennato fatta eccezione per una di esse tutte le lettere trattate nel corso di questo
studio di cui parliamo oggi erano interamente cifrate quindi non vi era alcun testo in chiaro
che permettesse di identificare i soggetti coinvolti il periodo o la zona geografica. Date,
emittente, destinatario tutto risultava totalmente illegibile e indecifrabile e inoltre le 55
lettere erano state mischiate in un archivio che conteneva vari altri documenti di cui molti in
chiaro in italiano dando così l'impressione che si trattasse di un'unica collezione. Probabilmente
chi le aveva catalogate in quel modo aveva ricostruito in qualche modo il periodo storico
infatti sono tutti documenti del XVI secolo ma aveva erroneamente dedotto che si trattasse
di versioni cifrate e in chiaro degli stessi testi. A breve approfondiremo vari aspetti più
in dettaglio ma per ora diciamo che a grandi linee il processo di decifrazione attuato dagli
studiosi è stato un misto di deduzione umana e applicazione di un algoritmo di ottimizzazione e
si è svolto più o meno in questo modo. I ricercatori hanno dovuto innanzitutto eseguire
una prima sessione di analisi per identificare la lingua originale del testo e per farlo hanno
utilizzato l'algoritmo che tra un po' esamineremo più in dettaglio. Una volta scoperta la lingua
hanno poi potuto individuare quali fossero gli omofoni, cioè i simboli che rappresentano le
lettere dell'alfabeto, quali fossero i caratteri speciali ad esempio un simbolo che serve a
duplicare l'ultimo simbolo e infine la struttura di base del cifrario. Il cifrario è la chiave che
permette sia di criptare che di decriptare un testo. Poi sono passati ad identificare i simboli
dei prefissi, dei suffissi, delle preposizioni e quelli che rappresentavano alcune parole intere.
Sulla base di questa decifrazione parziale gli è stato poi possibile attribuire i testi a Mary
Stuart, regina di Scozia e capire che erano lettere indirizzate all'ambasciatore francese
Castelnau. Arrivati a questo punto, esaminando altre lettere precedentemente già conosciute
della corrispondenza tra la Stuart e Castelnau, i ricercatori hanno scovato anche le versioni in
chiaro di cui abbiamo parlato poco fa e così hanno potuto determinare e verificare il significato di
vari altri elementi. E infine, dopo tutto questo lavoro, hanno dovuto identificare i simboli che
rappresentano nomi, luoghi e mesi dell'anno e finalmente hanno potuto completare la trascrizione
e decifrazione definitiva di tutti i documenti. In tutto questo, un aspetto che ho trovato molto
interessante è che nel corso di questo processo sono venuti fuori numerosi passaggi oscuri e
incomprensibili poiché contenevano un gran numero di errori ortografici e ad un esame più attento
poi sono persino emersi dei modelli ricorrenti che difficilmente possono essere spiegati con i
classici errori sporadici che ci si aspetta di commettere quando si cifrano lunghi testi a mano.
Solo una volta chiarito anche quest'ultimo mistero, e a breve vedremo come, l'indagine si è potuta
veramente considerare completa. Per capire come sono state decifrate le 55 lettere di Mary Stewart
dobbiamo innanzitutto capire come esse erano state cifrate originariamente. A dire il vero,
il principio di base dei cifrari è rimasto invariato per secoli. Ad ogni lettera dell'alfabeto viene
sostituito un simbolo che la rappresenti. Questa pratica prende il nome di crittografia tramite
cifrario a sostituzione e la sua forma più semplice è rappresentata dal cifrario a sostituzione
monoalfabetico, cioè quello in cui ad ogni lettera corrisponde un unico simbolo. Per esempio,
possiamo banalmente costruire uno di questi cifrari facendo corrispondere delle forme geometriche alle
lettere dell'alfabeto, un quadrato per l'A, un triangolo per la B, un cerchio per la C e così via,
magari inventandoci qualche figura irregolare perché ce ne servono ovviamente 26 in totale.
Già nel X secolo però, gli studiosi arabi avevano sviluppato una tecnica chiamata analisi delle
frequenze molto efficace per decifrare questo genere di codici crittografici. Tale tecnica
si basa sul fatto che alcune lettere dell'alfabeto sono usate molto più frequentemente di altre e i
simboli che le rappresentano sono probabilmente presenti più volte nei testi cifrati e dunque
sono più facili da identificare. Questa regola vale un po' per qualsiasi lingua, ad esempio in inglese
la E e la T sono particolarmente frequenti in qualsiasi testo, in italiano vale lo stesso per
la E, la A e la I. Pertanto in un testo cifrato monoalfabeticamente, assegnando un simbolo ad
una lettera, noteremmo immediatamente il ripetersi con maggiore frequenza di alcuni simboli e
potremmo usare questa informazione come ottima base di partenza per decriptare il testo. Nel XV
secolo quindi, proprio per ostacolare l'analisi delle frequenze, sono stati introdotti i cosiddetti
cifrari omofonici in cui le lettere più comuni sono rappresentate da più di un simbolo. Utilizzando
un cifrario omofonico, quando si effettua la codifica e si deve trasformare una lettera come
la E, si può dunque scegliere tra un gruppo di simboli anziché essere costretti ad usare sempre
lo stesso. In questo modo l'analisi delle frequenze viene fortemente disturbata introducendo maggiore
variabilità sugli elementi più frequenti. Ripercorrendo però lo stesso ragionamento anche
per le parole o le sillabe più comuni, si intuisce immediatamente che anch'esse possono rivelare
schemi ricorrenti utili ai decifratori di codici e quindi possono essere a loro volta oggetto di
analisi di frequenza. Articoli, avverbi e proposizioni ne sono un esempio, ma anche i nomi
propri nel caso in cui si stia lavorando su grandi archivi monotematici. Per questo motivo col
passare del tempo, ai cifrari omofonici è stata aggiunta anche la pratica della nomenclatura che
consiste nell'usare uno specifico gruppo di simboli per indicare una parola, un nome o una sillaba di
uso più frequente. In tal modo nel corso degli anni hanno iniziato a fare la loro comparsa testi
cifrati contenenti simboli misti, alcuni a sostituire le lettere dell'alfabeto, altri per i
nomi, altri ancora per le parole di uso più comune e così via. Infine, sempre per aggiungere maggiore
complessità per disturbare l'analisi delle frequenze, è stato introdotto anche l'utilizzo di simboli
nulli che devono semplicemente essere ignorati durante la decifrazione e di simboli speciali che
indicano necessità particolari come ad esempio ripetere il simbolo precedente o cancellarlo.
Dato il loro buon livello di sicurezza, quindi, i cifrari a sostituzione omofonica corredati di
nomenclatura e simboli speciali sono stati utilizzati per secoli. Inizialmente, quindi,
i ricercatori si aspettavano già che le 55 lettere fossero cifrate tramite un cifrario
omofonico con nomenclatura e simboli speciali, tuttavia non avevano idea a priori di quale
fosse la lingua in cui erano state originariamente scritte. Come già detto, infatti, non era presente
alcuna parola in chiaro. Inoltre, sommando tutti i documenti, si ottenevano ben 219 simboli distinti,
quasi dieci volte quelli di un normale alfabeto. L'unico modo per decifrare un testo del genere,
quindi, è ricostruire il cifrario, cioè la mappatura tra i simboli e i loro rispettivi
significati e dunque per iniziare a capirci qualcosa era essenziale cominciare a individuare
almeno quali fossero i corrispondenti delle lettere alfabetiche. E per risolvere questo
problema i ricercatori avevano un'arma molto potente e versatile a loro disposizione,
un cosiddetto algoritmo di ottimizzazione. Di ottimizzazione abbiamo già parlato qui su
Pensieri in Codice e negli episodi, ad esempio, sul problema del commesso viaggiatore, quindi se
non hai proprio idea di cosa io stia parlando ti consiglio di recuperarli per avere un quadro più
generale. Riassumendo brevemente però, il problema di recuperare la chiave di un cifrario a partire
solamente dal testo cifrato è perfettamente riconducibile ad un problema di ottimizzazione.
A tale scopo si esegue l'algoritmo per calcolare una serie di possibili soluzioni e individuare
fra esse quella definita ottima, ossia quella che totalizza un punteggio maggiore in base
ai criteri specificati dall'utente. Una volta individuata, tale soluzione probabilmente
corrisponderà a quella corretta, che nel nostro caso è la chiave originaria utilizzata per
cifrare il testo. I ricercatori di questo studio si sono quindi affidati alla ricerca stocastica,
una famiglia di tecniche ampiamente utilizzate per la ricerca di soluzioni ottime e nello specifico
hanno fatto uso della cosiddetta Hill Climbing, che è una tecnica relativamente semplice e
comunemente utilizzata. Per assegnare il punteggio ad una soluzione candidata hanno stabilito il
criterio di valutare la qualità del testo decifrato ottenuto utilizzandola, quindi
in pratica hanno deciso che migliore era il risultato di una decifrazione, migliore era
la chiave utilizzata per ottenerla, abbastanza logico.
So che detta in questo modo potrebbe sembrare un'affermazione banale, ma tieni sempre a
mente che ad un algoritmo vanno date istruzioni precise ed esaustive perché possa lavorare
correttamente. E come hanno fatto quindi i ricercatori a calcolare praticamente questo
valore di qualità? Beh, matematicamente è un po' complicato da spiegare in un podcast,
ci sono formule, logaritmi e sommatorie, quindi se ti interessano i dettagli ti ricordo sempre
che in descrizione trovi i link alle fonti di tutto quello che dico, ma possiamo provare
a descrivere il tutto a grandi linee.
Punto primo. Prima di applicare l'algoritmo i ricercatori hanno provato a indovinare
quale fosse la lingua originale dei documenti e per essa hanno calcolato con che frequenza
appaiono normalmente le sequenze di 5 lettere. Per farlo hanno utilizzato un corpus di testi
selezionati nella lingua scelta e hanno contato le frequenze dopo aver rimosso spazi e punteggiature.
Quindi, per capirci, immaginiamo ad esempio di fare questa operazione per l'italiano che
poi è la lingua che hanno provato per prima. Sceglieremo un corposo elenco di testi, elimineremo
completamente spazi e punteggiatura e poi andremo a calcolare con che frequenza compaiono
tutti i quintetti di lettere. In una frase tipo il mio cane si chiama cane, sì come
quello del tenente colombo, andremo ad estrarre sequenze del tipo il mio o il mioca e così
via. So che così non sembra avere molto senso ma pensa ad una sequenza come zione, ti renderai
subito conto che questa sarà molto più usata di altre in un testo in italiano. Ad ogni modo
di tutte queste sequenze dovremo poi stilare una classifica. Più volte le abbiamo incontrate
e più in alto saranno nell'elenco. Il risultato di tutto ciò sarà la nostra statistica di
riferimento. Durante l'esecuzione dell'algoritmo, quindi per valutare una decifrazione provvisoria
realizzata tramite una chiave candidata, i ricercatori hanno controllato le occorrenze
delle sequenze di cinque lettere nel testo decifrato e le hanno messe in rapporto con
la loro statistica di riferimento. In pratica, tenendo conto delle differenze di lunghezza tra
i testi, più le frequenze relative tra decifrato e riferimento si avvicinavano, più la chiave usata
veniva considerata di qualità. Tornando quindi al nostro esempio per la lingua italiana, dicevamo
che c'è da immaginare che la sequenza zione sia molto più presente di altre come otare o edere e
pertanto la chiave è da considerarsi migliore rispetto ad un'altra se produce un testo che
rispetta maggiormente tali proporzioni. Spero di essere riuscito a spiegarmi o in caso contrario
possiamo sempre continuare il discorso nel gruppo Telegram di Pensieri in Codice, lo trovi sul sito
di pensieriincodice.it o semplicemente cercando su Telegram. E comunque, ad essere onesti,
anche il paper originale non mi è sembrato esaustivo su questo punto. Ho provato ad esempio
a cercare informazioni sul perché scegliere proprio sequenze di cinque lettere ma non ho
trovato granché e credo che sia un argomento più legato alla linguistica. Se quindi tu che mi
ascolti hai maggiori conoscenze in merito, magari contattami che potremmo parlarne in un prossimo
episodio. Ma tornando agli aspetti più informatici della questione, dicevamo che applicando l'algoritmo
di Hill Climbing al problema di individuare una chiave crittografica si ottiene un procedimento
di ricerca della soluzione ottima. Ad ogni iterazione l'algoritmo genera una mappatura
in modo semi-casuale, la utilizza per decifrare il testo e calcola un punteggio per il risultato
ottenuto. Se tale punteggio è migliore del precedente, la nuova mappatura viene utilizzata
come base per la prossima iterazione, altrimenti viene scartata e l'algoritmo continua a usare
come soluzione di partenza la chiave attuale. Ricorda sempre che le parole chiave, soluzione e
mappatura in questo contesto sono sinonimi. Il processo quindi prosegue in questo modo finché
giro dopo giro non arriva ad un punto nel quale non riesce più a migliorare la chiave. Il trucco
sta nella generazione della mappatura, che di volta in volta viene fatto eseguendo solo un
piccolo cambiamento rispetto alla versione precedente. Nel nostro caso specifico sono
stati utilizzati solo due tipi di modifiche della soluzione candidata, lo scambio di due simboli
qualsiasi e la riassegnazione di uno qualsiasi dei simboli. Cioè in pratica l'algoritmo ad ogni
modifica della chiave poteva provare una tra due strade o scambiava due lettere corrispondenti a
due simboli, quindi se prima il quadrato corrispondeva ad A e il triangolo a B poteva
provare a invertirli, oppure assegnava una differente associazione tra una lettera e un
simbolo, quindi se prima la A corrispondeva al triangolo poteva provare a farla corrispondere
al cerchio. Il nome il climbing sta ad indicare che l'algoritmo progressivamente scala verso
soluzioni sempre migliori, come un individuo che passo dopo passo scala una collina verso
l'avetta, ma questa affermazione appare molto più chiara se vai ad esempio a consultare il paper
originale che alla figura A20 dell'appendice A evidenzia la rappresentazione grafica dell'algoritmo.
Quello che però è molto interessante è che in generale, nella maggior parte dei problemi di
ottimizzazione, potrebbero esistere più colline, più massimali, quindi più soluzioni che
matematicamente sembrano corrette, ma di cui solo una lo è veramente e viene chiamata massimo
globale. E benché ultimamente tantissimi facciano di tutto per farci credere il contrario, i computer
non hanno ancora sviluppato una vera intelligenza, perciò esiste sempre il rischio che un algoritmo
rimanga matematicamente bloccato in uno di questi massimali locali. Se li immaginiamo infatti proprio
come una serie di collinette di cui solo una è la più alta di tutte, possiamo intuire facilmente
che ci sia la possibilità concreta che l'algoritmo si incammini lungo un pendio sbagliato e una volta
in cima, potendo attuare solo minime modifiche alla chiave, resti intrappolato in quella che
crede essere la soluzione migliore. Un po' come un uomo che ad ogni passo controlla ottusamente
l'altitudine a cui si trova e non vuole mai che essa diminuisca, no? La vetta più alta è in
realtà un'altra rispetto a quella dove si trova, ma qualsiasi passo egli faccia in qualsiasi
direzione provoca una diminuzione di altitudine prima che questa aumenti di nuovo. Per superare
problemi del genere con l'Hill Climbing, dunque, si è soliti eseguire più volte l'intero processo
partendo sempre da una diversa soluzione iniziale generata in modo casuale, ma nel nostro caso
specifico l'algoritmo impiegato dai ricercatori è stato una variante del Hill Climbing chiamata
Simulated Handling, che risolve il problema dei massimali locali consentendo alcuni cambiamenti
di pendenza che comportano un punteggio peggiore nel percorso intermedio.
Le difficoltà incontrate durante questo studio comunque non sono state solo di tipo informatico
o matematico. Come anticipato, l'algoritmo di ottimizzazione ha permesso infatti di recuperare
la mappatura dei simboli omofonici tramite un processo quasi totalmente automatico, ma tutti
i simboli della nomenclatura che rappresentavano parole comuni, parti di parole, nomi o luoghi
hanno richiesto molto altro lavoro. All'inizio i ricercatori non avendo modo di sapere quali
simboli fossero omofoni e quali invece rappresentassero altre entità linguistiche, hanno applicato
l'algoritmo di Hill Climbing ipotizzando che ogni simbolo potesse rappresentare una
qualsiasi lettera dell'alfabeto. Il primo tentativo è stato fatto supponendo che la
lingua originale dei testi fosse l'italiano, dato che essi erano stati rinvenuti in una
collezione contenente quasi solo materiale nella nostra lingua, ma ciò non ha portato
a nulla di concreto. Solo quando dopo vari tentativi i ricercatori hanno provato con il
francese, hanno finalmente ottenuto una prima decrittazione sensata e di conseguenza una prima
mappatura valida. Seguendo questa linea dunque il processo è andato avanti come un susseguirsi di
esperimenti. I ricercatori hanno lavorato formulando un'ipotesi e sfruttando poi l'algoritmo di
ottimizzazione e la relativa decifrazione per verificarne la bontà. Ad esempio hanno ipotizzato
che un certo simbolo potesse servire a duplicare l'ultima lettera e con tali presupposti hanno
eseguito una versione riconfigurata dell'algoritmo di ottimizzazione. Poi hanno ipotizzato che il tal
simbolo servisse a cancellare l'ultima lettera e di nuovo hanno eseguito la decifrazione. Hanno
provato a considerare i simboli diacritici come rappresentanti di parole o in generale
qualcosa di differente rispetto alle singole lettere sulla base del fatto che i cifrari di
quel periodo utilizzavano questo tipo di approccio quindi le hanno esclusi per affinare i risultati
dell'esecuzione dell'algoritmo. Ogni nuova ipotesi era seguita da una o più verifiche
automatizzate tramite l'esecuzione di ottimizzazione, decrittazione e valutazione della bontà del
risultato. Se l'ipotesi veniva confermata si fissava un nuovo tassello del puzzle e si passava
poi al successivo. Insomma si è trattato di un vero e proprio processo di risoluzione di un enigma ad
eccezione del fatto che l'algoritmo di ottimizzazione gli ha fornito un enorme aiuto occupandosi della
parte più pesante e noiosa. Solo dopo molti tentativi è stato finalmente raggiunto un grado
di decrittazione tale da poter leggere i documenti abbastanza chiaramente da permettere di identificare
anche i simboli che rappresentavano persone o luoghi. Sì perché senza il dizionario della
nomenclatura a disposizione è stato indispensabile poter leggere la maggior parte del testo per poi
ricostruire e indovinare i soggetti, i luoghi e gli eventi sulla base di altre fonti. Come in
un racconto in cui nel testo mancano solo alcune parole, si sa dove mancano, si sa che sono nomi e
si sa anche quando due spazi corrispondono allo stesso nome e per indovinarli è necessario riuscire
a leggere abbastanza da poter capire fatti e contesto. Alla fine i ricercatori sono arrivati
a stabilire che l'autrice delle lettere fosse Maria Stewart regina di Scozia e hanno quindi
preso in considerazione nomi di personaggi e luoghi che potevano in qualche modo essere legati
a lei, amici, conoscenti, congiunti, proprietà, sedi nobiliari eccetera finché finalmente non
li hanno individuati. Non ci vengono raccontati i dettagli ma diciamo che non deve essere stato
affatto semplice se consideriamo che ad aumentare il livello di sicurezza della criptografia nelle
lettere segrete di Maria Stewart non solo era stato criptato il testo ed era stata utilizzata
la nomenclatura per codificare i nomi ma questi erano stati persino sostituiti utilizzando pseudonimi
e nomi in codice. Tra gli aspetti che ho trovato più interessanti di questo studio c'è poi sicuramente
l'importanza che hanno ricoperto gli errori di cifratura. In qualsiasi testo cifrato storico è
probabile trovare errori di cifratura casuali come l'omissione di un simbolo, l'aggiunta di
uno di troppo, l'uso di un segno sbagliato. Ci si aspetta di trovare errori sporadici nei documenti
perché la cifratura manuale è un processo complicato, è una distrazione, un po' di
confusione sono più che comprensibili. Tuttavia in alcuni documenti di questo studio la percentuale
di errori si è rivelata essere piuttosto alta rendendo tra l'altro anche più complessa la
decifrazione e l'interpretazione. Inoltre un esame più approfondito ha mostrato anche che molti di
questi errori erano sistematici cioè accadeva spesso che alla stessa lettera corrispondesse
lo stesso simbolo errato, una cosa tutt'altro che normale. E poi alcuni si sono verificati decine
di volte, spesso all'interno dello stesso documento, non potevano essere semplicemente casuali.
Inizialmente i ricercatori hanno pensato che si trattasse di errori dovuti alla somiglianza
grafica come ad esempio l'uso di un simbolo senza il punto al posto di uno con il punto o viceversa,
tuttavia questo tipo di sbaglio rappresentava solo una piccola percentuale del totale. Esaminando
quindi altri cifrari utilizzati da Maria hanno invece notato che il cifrario ricostruito in
questo studio, che hanno chiamato cifrario Maria Castelnuovo, condivide diverse caratteristiche
come i diacritici, i simboli omofoni e la maggior parte del vocabolario con un altro chiamato cifrario
di Maria Beaton e utilizzato sempre da la Stuart per comunicare con James Beaton,
arcivescovo di Glasgow e suo ambasciatore in Francia. L'ipotesi quindi è diventata quella
che si siano verificati errori sistematici quando un segretario ha dovuto codificare
molte lettere utilizzando contemporaneamente cifrari diversi. Poteva capitare infatti che
Maria inviasse nello stesso giorno tante comunicazioni a vari soggetti, ognuna da
proteggere con uno specifico cifrario ed è altrettanto probabile che il lavoro di cifratura
fosse affidato ad un'unica persona. E molti di questi sbagli possono proprio essere spiegati
dal fatto che il segretario abbia erroneamente utilizzato il simbolo grafico preso da un cifrario
piuttosto che da un altro. Quando un addetto alla cifratura infatti iniziava a usare un
nuovo cifrario con cui non aveva ancora familiarità è probabile che cercasse nella tabella ogni singolo
simbolo grafico con estrema attenzione, ma dopo un po' di tempo è altresì probabile che gli iniziasse
a memorizzare i simboli corrispondenti alle lettere più frequenti e non sentisse più il bisogno di
dover sempre consultare la tabella ad ogni singolo passaggio. Tuttavia un comportamento del genere
tendeva evidentemente a generare confusione e far sì che a volte la persona sbagliasse e
utilizzasse erroneamente un simbolo preso dal cifrario sbagliato, dando così vita a un fenomeno
che i ricercatori hanno definito contaminazione incrociata dei cifrari. Solo dopo aver compreso
questo fatto è stato possibile finalmente decifrare e interpretare correttamente tutti i vari passaggi
che ancora risultavano oscuri nei documenti del gruppo Mary Castelnuo e lo si è fatto appunto
esaminandoli alla luce anche dell'altro cifrario, quello Mary Beaton. Infine è anche interessante
notare che in molti punti il segretario è stato in grado di rilevare da solo gli errori di
contaminazione già durante la cifratura e li ha perfino corretti immediatamente utilizzando
il simbolo di cancellazione o sbarrando il simbolo sbagliato o addirittura sovrascrivendolo.
In tutta questa storia a me piace pensare a quanto fosse robusto e avanzato il sistema
di comunicazione segreto messo in piedi da Mary Stewart, già a partire dalla chiave di criptografia
che presenta ad esempio l'uso dei diacritici, niente affatto comune per i cifrari diplomatici
francesi dell'epoca. Durante la prigionia Maria poteva scrivere e ricevere lettere tramite la
posta ufficiale sotto la supervisione di Welsingham e utilizzava questo canale per le comunicazioni con
la regina Elisabetta o con i membri del consiglio o per le sue proprietà in Francia per questioni
non troppo delicate insomma. Ma oltre ai canali ufficiali la donna riuscì a mantenere contatti
segreti attraverso tutta una serie di canali confidenziali e uno di questi era proprio quello
supportato da Castelnau che inoltrava lettere confidenziali tra Maria e i suoi collaboratori
nell'Europa continentale. I canali segreti però non erano immuni da intercettazioni o da eventuali
occhi indiscreti e Maria dovette quindi affrontare una grossa sfida per mantenere la comunicazione
sicura e privata. La crittografia le ha permesso per lungo tempo di proteggere i suoi interessi e
la sua vita in fin dei conti un po' come accade per noi al giorno d'oggi anche se in scala diversa.
Noi facciamo ampio e disinvolto uso della crittografia spesso senza nemmeno rendercene
conto eppure per la regina di Scozia all'epoca era una necessità che richiedeva tanto impegno
in lavoro. Il fatto di utilizzare più cifrari a seconda del destinatario ci fa capire quanta
attenzione venisse posta in queste misure di sicurezza e può farci solo immaginare quante
lettere e documenti siano stati distrutti dopo la lettura e magari quanti cifrari siano andati
perduti perché non più utilizzabili. Alla fine Welsingham e i suoi agenti riuscirono ad infiltrarsi
nell'abbasciata di Castelnuo a metà del 1583 e a compromettere il canale di comunicazione con
Maria. Le sette lettere ritrovate in chiaro in un'altra collezione ne sono la prova lampante.
Una lettera che dimostrava il suo coinvolgimento nel complotto ordito ai danni della regina
Elisabetta fu infine intercettata e decifrata nel 1586. A seguito di questo evento Maria fu
condannata a morte e la condanna fu eseguita nel febbraio del 1586.
E anche oggi siamo giunti alla conclusione di questo episodio. Come al solito io spero di
averti raccontato una storia interessante. Devo dire che gli aspetti storici dell'informatica mi
stanno intrigando molto in questo periodo e anche Pensieri in Codice ne sta risentendo.
L'episodio è venuto molto più lungo di quanto pensassi ma spero ne sia valsa la pena. Come ormai
con suetudine ringrazio Edoardo e Carlo per la loro donazione mensile ai quali oggi si aggiunge
anche Paola con la sua seconda donazione. Il ringraziamento è doppio per tutti perché
continuate a mantenere fiducia nel progetto anche se le pubblicazioni si sono molto diradate. La
buona notizia per tutti e tre però è che avete superato la soglia prefissata di 10 euro di
donazioni e quindi in queste settimane riceverete a casa i nuovi gadget di Pensieri in Codice cioè
il segnalibro e gli stickers. Ora se anche tu vuoi supportare il progetto e ricevere anche i
gadget trovi tutto sul sito pensieriincodice.it con due i mi raccomando che tra l'altro tra
qualche settimana verrà aggiornato con un po di cose nuove e interessanti si spera. Tu resta
sintonizzato prima o poi ce la farò. Poi altra notizia importante come sai Pensieri in Codice è
partner del Grusp che in queste settimane organizza moltissime conferenze. Le prossime
sono il container day il 12 ottobre, il react.js day il 27 ottobre, il Laravel day il 9 novembre
e poi ce ne sono altre ma è inutile che ti faccio qui l'elenco completo ti lascio il link in
descrizione. Sempre in descrizione però trovi il codice sconto del 10% sull'acquisto dei biglietti
mi raccomando dacci un'occhiata fammi sapere a quali conferenze parteciperai che magari ci
vediamo lì. Per il resto tagliamo corto che sono stanchissimo e sono anche stufo persino io di
ripetere sempre le stesse cose che tanto già le sai fai ascoltare l'episodio condividilo sui social
visita il sito fa una donazione eccetera eccetera eccetera. Noi ci sentiamo al prossimo episodio
grazie per aver ascoltato fin qui fino in fondo è stata faticosa per entrambi e non
dimenticare che un informatico risolve problemi a volte anche usando il computer

